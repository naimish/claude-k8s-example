# Staging environment overrides
global:
  environment: staging
  imageRegistry: ghcr.io/YOUR_ORG
  featureFlags:
    newUIEnabled: false
    betaFeaturesEnabled: false

# API Service - Medium resources with autoscaling
api-service:
  enabled: true
  replicaCount: 2

  image:
    tag: "REPLACE_WITH_TAG"  # Set via deployment
    pullPolicy: IfNotPresent

  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

  env:
    - name: ENVIRONMENT
      value: "staging"
    - name: PORT
      value: "8080"

# Worker Service - Medium resources with autoscaling
worker-service:
  enabled: true
  replicaCount: 2

  image:
    tag: "REPLACE_WITH_TAG"  # Set via deployment
    pullPolicy: IfNotPresent

  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

  env:
    - name: ENVIRONMENT
      value: "staging"
    - name: PORT
      value: "8080"
    - name: JOB_INTERVAL
      value: "30"

# Web Frontend - Medium resources with autoscaling
web-frontend:
  enabled: true
  replicaCount: 2

  image:
    tag: "REPLACE_WITH_TAG"  # Set via deployment
    pullPolicy: IfNotPresent

  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

  env:
    - name: ENVIRONMENT
      value: "staging"
    - name: PORT
      value: "8080"
    - name: API_SERVICE_URL
      value: "http://microservices-platform-api-service:80"

  ingress:
    enabled: false
